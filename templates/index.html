<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Yangon Property Oracle</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />

    <style>
      body {
        font-family: 'Poppins', sans-serif;
        background-color: #f8f9fa; /* Light gray background */
      }
      
      /* From Uiverse.io by andrew-demchenk0 */
      .switch {
        font-size: 17px;
        position: relative;
        display: inline-block;
        width: 64px;
        height: 34px;
      }
      
      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }
      
      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #a40303ff;
        transition: 0.4s;
        border-radius: 30px;
      }
      
      .slider:before {
        position: absolute;
        content: '';
        height: 30px;
        width: 30px;
        border-radius: 20px;
        left: 2px;
        bottom: 2px;
        z-index: 2;
        background-color: #e8e8e8;
        transition: 0.4s;
      }
      
      .sun svg {
        position: absolute;
        top: 6px;
        left: 36px;
        z-index: 1;
        width: 24px;
        height: 24px;
      }
      
      .moon svg {
        fill: #73c0fc;
        position: absolute;
        top: 5px;
        left: 5px;
        z-index: 1;
        width: 24px;
        height: 24px;
      }
      
      /* .switch:hover */
      .sun svg {
        animation: rotate 15s linear infinite;
      }
      
      @keyframes rotate {
        0% {
          transform: rotate(0);
        }
      
        100% {
          transform: rotate(360deg);
        }
      }
      
      /* .switch:hover */
      .moon svg {
        animation: tilt 5s linear infinite;
      }
      
      @keyframes tilt {
        0% {
          transform: rotate(0deg);
        }
      
        25% {
          transform: rotate(-10deg);
        }
      
        75% {
          transform: rotate(10deg);
        }
      
        100% {
          transform: rotate(0deg);
        }
      }
      
      .input:checked + .slider {
        background-color: #183153;
      }
      
      .input:focus + .slider {
        box-shadow: 0 0 1px #183153;
      }
      
      .input:checked + .slider:before {
        transform: translateX(30px);
      }
      .main-container {
        margin-top: 50px;
        margin-bottom: 50px;
      }
      .custom-card {
        border: none;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* Soft shadow */
        border-radius: 15px;
        background-color: white;
        padding: 20px;
      }
      .result-box {
        background-color: #e9ecef;
        border-radius: 10px;
        padding: 20px;
        text-align: center;
        margin-top: 20px;
      }
      .price-text {
        color: #0d6efd; /* Bootstrap Primary Blue */
        font-weight: bold;
        font-size: 2rem;
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
      <div class="container d-flex align-items-center">
        <a class="navbar-brand fw-bold" href="#">
          <img src="{{ url_for('static', filename='Image/logo.png') }}" width="150" height="60" class="d-inline-block align-text-top me-2" />
          YANGON CONDO ESTIMATION
        </a>

        <!-- From Uiverse.io by andrew-demchenk0 -->
        <label class="switch">
          <span class="sun">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <g fill="#ffd43b">
                <circle r="5" cy="12" cx="12"></circle>
                <path d="m21 13h-1a1 1 0 0 1 0-2h1a1 1 0 0 1 0 2zm-17 0h-1a1 1 0 0 1 0-2h1a1 1 0 0 1 0 2zm13.66-5.66a1 1 0 0 1 -.66-.29 1 1 0 0 1 0-1.41l.71-.71a1 1 0 1 1 1.41 1.41l-.71.71a1 1 0 0 1 -.75.29zm-12.02 12.02a1 1 0 0 1 -.71-.29 1 1 0 0 1 0-1.41l.71-.66a1 1 0 0 1 1.41 1.41l-.71.71a1 1 0 0 1 -.7.24zm6.36-14.36a1 1 0 0 1 -1-1v-1a1 1 0 0 1 2 0v1a1 1 0 0 1 -1 1zm0 17a1 1 0 0 1 -1-1v-1a1 1 0 0 1 2 0v1a1 1 0 0 1 -1 1zm-5.66-14.66a1 1 0 0 1 -.7-.29l-.71-.71a1 1 0 0 1 1.41-1.41l.71.71a1 1 0 0 1 0 1.41 1 1 0 0 1 -.71.29zm12.02 12.02a1 1 0 0 1 -.7-.29l-.66-.71a1 1 0 0 1 1.36-1.36l.71.71a1 1 0 0 1 0 1.41 1 1 0 0 1 -.71.24z"></path>
              </g>
            </svg>
          </span>
          <span class="moon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
              <path d="m223.5 32c-123.5 0-223.5 100.3-223.5 224s100 224 223.5 224c60.6 0 115.5-24.2 155.8-63.4 5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6-96.9 0-175.5-78.8-175.5-176 0-65.8 36-123.1 89.3-153.3 6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"></path>
            </svg>
          </span>
          <input type="checkbox" class="input" />
          <span class="slider"></span>
        </label>
      </div>
    </nav>

    <div class="container main-container">
      <div class="row align-items-center">
        <div class="col-md-6 mb-4">
          <h1 class="display-4 fw-bold">Smart Valuations</h1>
          <p class="lead text-muted">Predict Yangon condo prices instantly using our AI model. Just enter the details and get an estimate.</p>
        </div>

        <div class="col-md-6">
          <div class="custom-card">
            <h3 class="mb-4">Property Details</h3>

            <form id="prediction-form">
              <div class="mb-3">
                <label for="area" class="form-label">Area (sqft) <span class="text-danger">*</span></label>
                <input type="number" class="form-control" id="area" placeholder="e.g. 1200" required />
              </div>

              <div class="row mb-3">
                <div class="col">
                  <label for="bedrooms" class="form-label">Bedrooms</label>
                  <input type="number" class="form-control" id="bedrooms" placeholder="e.g. 2" />
                </div>
                <div class="col">
                  <label for="bathrooms" class="form-label">Bathrooms</label>
                  <input type="number" class="form-control" id="bathrooms" placeholder="e.g. 1" />
                </div>
              </div>

              <div class="mb-3">
                <label for="township" class="form-label">Township</label>
                <select class="form-select" id="township">
                  <option value="">Select township</option>
                  <option>Bahan</option>
                  <option>Lanmadaw</option>
                  <option>Yankin</option>
                  <option>South Oakklar</option>
                  <option>Hlaing</option>
                  <option>Sanchaung</option>
                </select>
              </div>

              <div class="mb-4">
                <label class="form-label d-block">Amenities</label>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="checkbox" id="pool" />
                  <label class="form-check-label" for="pool">Pool</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="checkbox" id="security" />
                  <label class="form-check-label" for="security">Security</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="checkbox" id="gym" />
                  <label class="form-check-label" for="gym">Gym</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="checkbox" id="elevator" />
                  <label class="form-check-label" for="elevator">Elevator</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="checkbox" id="parking" />
                  <label class="form-check-label" for="parking">Parking</label>
                </div>
              </div>

              <button type="submit" class="btn btn-primary w-100 py-2 fw-bold">Estimate Value</button>
            </form>

            <div class="result-box">
              <h5>Estimated Market Value</h5>
              <p id="predicted-price" class="price-text">â€”</p>
              <p id="predicted-note" class="text-muted small"></p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer class="text-center py-4 text-muted border-top">
      <p>&copy; 2025 Yangon Property Oracle. Student Project.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // Select elements by ID
      const form = document.getElementById('prediction-form')
      const priceEl = document.getElementById('predicted-price')
      const noteEl = document.getElementById('predicted-note')
      
      // Listen for form submit
      form.addEventListener('submit', async (e) => {
        e.preventDefault() // Stop page reload
      
        // 1. Collect Data from HTML inputs
        const areaValue = document.getElementById('area').value
      
        // Simple validation
        if (!areaValue) {
          alert('Please enter the Area size.')
          return
        }
      
        const payload = {
          area: areaValue,
          bedrooms: document.getElementById('bedrooms').value,
          bathrooms: document.getElementById('bathrooms').value,
          township: document.getElementById('township').value,
          amenities: {
            'Swimming Pool': document.getElementById('pool').checked ? 1 : 0,
            Security: document.getElementById('security').checked ? 1 : 0,
            Gym: document.getElementById('gym').checked ? 1 : 0,
            Has_Elevator: document.getElementById('elevator').checked ? 1 : 0,
            Has_Parking: document.getElementById('parking').checked ? 1 : 0
          }
        }
      
        // 2. Send Data to Server
        try {
          priceEl.textContent = 'Calculating...'
          noteEl.textContent = ''
      
          const response = await fetch('/predict', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          })
      
          const data = await response.json()
      
          if (data.error) {
            throw new Error(data.error)
          }
      
          // 3. Update UI with results
          // Format numbers to look nice (e.g., 1,000)
          const usd = new Intl.NumberFormat('en-US').format(data.predicted_price_usd)
          const mmk = new Intl.NumberFormat('en-US').format(data.predicted_price_mmk)
      
          priceEl.textContent = `$${usd}`
          noteEl.textContent = `${mmk} MMK`
        } catch (error) {
          console.error(error)
          priceEl.textContent = 'Error'
          noteEl.textContent = 'Could not connect to server.'
        }
      })
    </script>
  </body>
</html>
